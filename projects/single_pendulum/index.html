<!DOCTYPE html>
<html lang="en">

  <!-- Head -->
  <head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">    <!-- Metadata, OpenGraph and Schema.org -->
    

    <!-- Standard metadata -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>3D Single Compound Pendulum | Jin Hyun  Park</title>
    <meta name="author" content="Jin Hyun  Park">
    <meta name="description" content="Simulation of a single compound pendulum in 3D using MATLAB.">
    <meta name="keywords" content="jekyll, jekyll-theme, academic-website, portfolio-website">


    <!-- Bootstrap & MDB -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha256-DF7Zhf293AJxJNTmh5zhoYYIMs2oXitRfBjY+9L//AY=" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/css/mdb.min.css" integrity="sha256-jpjYvU3G3N6nrrBwXJoVEYI/0zw8htfFnhT9ljN3JJw=" crossorigin="anonymous">

    <!-- Bootstrap Table -->
    <link defer rel="stylesheet" href="https://unpkg.com/bootstrap-table@1.21.4/dist/bootstrap-table.min.css">

    <!-- Fonts & Icons -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.15.4/css/all.min.css" integrity="sha256-mUZM63G8m73Mcidfrv5E+Y61y7a12O5mW4ezU3bxqW4=" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/academicons@1.9.1/css/academicons.min.css" integrity="sha256-i1+4qU2G2860dGGIOJscdC30s9beBXjFfzjWLjBRsBg=" crossorigin="anonymous">
    <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:100,300,400,500,700|Material+Icons">

    <!-- Code Syntax Highlighting -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/jwarby/jekyll-pygments-themes@master/github.css" media="" id="highlight_theme_light">

    

    <!-- Styles -->
    
    <link rel="shortcut icon" href="data:image/svg+xml,&lt;svg%20xmlns=%22http://www.w3.org/2000/svg%22%20viewBox=%220%200%20100%20100%22&gt;&lt;text%20y=%22.9em%22%20font-size=%2290%22&gt;%E2%9A%9B%EF%B8%8F&lt;/text&gt;&lt;/svg&gt;">
    
    <link rel="stylesheet" href="/assets/css/main.css">
    <link rel="canonical" href="https://jinhyunpark2459.github.io/projects/single_pendulum/">

    <!-- Dark Mode -->
    
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/jwarby/jekyll-pygments-themes@master/native.css" media="none" id="highlight_theme_dark">

    <script src="/assets/js/theme.js"></script>
    <script src="/assets/js/dark_mode.js"></script>
    

  </head>

  <!-- Body -->
  <body class="fixed-top-nav ">

    <!-- Header -->
    <header>

      <!-- Nav Bar -->
      <nav id="navbar" class="navbar navbar-light navbar-expand-sm fixed-top">
        <div class="container">
          <a class="navbar-brand title font-weight-lighter" href="/"><span class="font-weight-bold">Jin Hyun </span>Park</a>
          <!-- Navbar Toggle -->
          <button class="navbar-toggler collapsed ml-auto" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar top-bar"></span>
            <span class="icon-bar middle-bar"></span>
            <span class="icon-bar bottom-bar"></span>
          </button>

          <div class="collapse navbar-collapse text-right" id="navbarNav">
            <ul class="navbar-nav ml-auto flex-nowrap">

              <!-- About -->
              <li class="nav-item ">
                <a class="nav-link" href="/">About</a>
              </li>
              

              <!-- Other pages -->
              <li class="nav-item ">
                <a class="nav-link" href="/projects/">Dynamics Simulations</a>
              </li>
              <li class="nav-item ">
                <a class="nav-link" href="/_pages/dropdown.html">submenus</a>
              </li>

              <!-- Toogle theme mode -->
              <li class="toggle-container">
                <button id="light-toggle" title="Change theme">
                  <i class="fas fa-moon"></i>
                  <i class="fas fa-sun"></i>
                </button>
              </li>
            </ul>
          </div>
        </div>
      </nav>

      <!-- Scrolling Progress Bar -->
      <progress id="progress" value="0">
        <div class="progress-container">
          <span class="progress-bar"></span>
        </div>
      </progress>
    </header>


    <!-- Content -->
    <div class="container mt-5">
      
        <!-- page.html -->
        <div class="post">

          <header class="post-header">
            <h1 class="post-title">3D Single Compound Pendulum</h1>
            <p class="post-description">Simulation of a single compound pendulum in 3D using MATLAB.</p>
          </header>

          <article>
            <h3 id="overview">Overview</h3>
<p>One of the challenges of 3D rigid body dynamics is that the angular momentum vector is not always aligned with the angular velocity vector (as it is in the 2D case). In 3D, the two quantities are related by the inertia tensor. To study the complications of 3D rigid body dynamics, I simulated a compound pendulum in 3D. To simplify the math, the pendulum will not be allowed to twist about its longitudinal axis. This is equivalent to connecting the pendulum to the base via a <a href="https://www.youtube.com/watch?v=LCMZz6YhbOQ&amp;ab_channel=Lesics" rel="external nofollow noopener" target="_blank">universal joint</a>.</p>

<p>I took two different approaches to solving for the motion of the pendulum: (1) Newton-Euler method and (2) Lagrange method. Both methods are fully explored in the sections below.</p>

<h3 id="newton-euler-method">Newton-Euler Method</h3>
<p>The Newton-Euler approach is the standard \(\sum \mathbf{F}=m\mathbf{a}\) (linear moment balance) and \(\sum \mathbf{M}=I\mathbf{\alpha}\) (angular momentum balance) approach to the problem. Furthermore, we will take the minimal coordinates approach, meaning that we will take into account the constraints to reduce the degrees of freedom of the system as much as possible prior to deriving the equations of motion. This is in contrast to the maximal coordinates approach where we allow the system to have maximal degrees of freedom and we introduce constraint equations only at the end, which must be solved simultaneously with the equations of motion.</p>

<p>In general, you need six coordinates to fully describe the position and orientation of a rigid body in 3D space (three for position and three for orientation). Constraining the pendulum to be rigidly attached to the base reduces this to three coordinates (three angles). The no-twist condition further reduces this to two angles. We will defined these two angles as \(\theta\) and \(\phi\) (shown in the figure below). Hence solving for the motion of the pendulum boils down to solving for the time evolution of these two angles.</p>

<div class="row justify-content-sm-center">
    <div class="col-sm-8 mt-3 mt-md-0">
        <figure>

  <picture>
    
    <source class="responsive-img-srcset" media="(max-width: 480px)" srcset="/assets/img/single_pendulum/angles-480.webp"></source>
    <source class="responsive-img-srcset" media="(max-width: 800px)" srcset="/assets/img/single_pendulum/angles-800.webp"></source>
    <source class="responsive-img-srcset" media="(max-width: 1400px)" srcset="/assets/img/single_pendulum/angles-1400.webp"></source>
    

    <!-- Fallback to the original file -->
    <img src="/assets/img/single_pendulum/angles.jpg" class="img-fluid rounded z-depth-1" width="auto" height="auto" onerror="this.onerror=null; $('.responsive-img-srcset').remove();">

  </picture>

</figure>

    </div>
</div>

<p>First, we need to define the body frame. To define the body frame, we need to go through a series of two rotations. We start with the inertial frame \(I=(\hat{x},\hat{y},\hat{z})\) and rotate it about \(\hat{x}\) by an angle \(\theta\) to obtain an intermediate frame \(A=(\hat{a}_1,\hat{a}_2,\hat{a}_3)\).</p>

<div class="row justify-content-sm-center">
    <div class="col-sm-8 mt-3 mt-md-0">
        <figure>

  <picture>
    
    <source class="responsive-img-srcset" media="(max-width: 480px)" srcset="/assets/img/single_pendulum/rotation1-480.webp"></source>
    <source class="responsive-img-srcset" media="(max-width: 800px)" srcset="/assets/img/single_pendulum/rotation1-800.webp"></source>
    <source class="responsive-img-srcset" media="(max-width: 1400px)" srcset="/assets/img/single_pendulum/rotation1-1400.webp"></source>
    

    <!-- Fallback to the original file -->
    <img src="/assets/img/single_pendulum/rotation1.jpg" class="img-fluid rounded z-depth-1" width="auto" height="auto" onerror="this.onerror=null; $('.responsive-img-srcset').remove();">

  </picture>

</figure>

    </div>
</div>

<p>Notice that this is a negative rotation about \(\hat{x}\) according to the right-hand rule. Using simple geometric relations, we can find the transformation equation between the two frames:</p>

\[\hat{x}=\hat{a}_1\]

\[\hat{y}=cos(\theta)\hat{a}_2+sin(\theta)\hat{a}_3\]

\[\hat{z}=-sin(\theta)\hat{a}_2+cos(\theta)\hat{a}_3\]

<p>We can put the three equations into a matrix \({}^IC^A\), called the coordinate transformation matrix from frame \(I\) to frame \(A\):</p>

\[{}^IC^A=
\begin{bmatrix}
1 &amp; 0 &amp; 0 \\
0 &amp; cos(\theta) &amp; sin(\theta) \\
0 &amp; -sin(\theta) &amp; cos(\theta) \\
\end{bmatrix}\]

<p>For the second rotation, we rotate frame \(A\) about \(\hat{a}_2\) by an angle \(\phi\) to obtain the body frame \(B=(\hat{b}_1,\hat{b}_2,\hat{b}_3)\).</p>

<div class="row justify-content-sm-center">
    <div class="col-sm-8 mt-3 mt-md-0">
        <figure>

  <picture>
    
    <source class="responsive-img-srcset" media="(max-width: 480px)" srcset="/assets/img/single_pendulum/rotation2-480.webp"></source>
    <source class="responsive-img-srcset" media="(max-width: 800px)" srcset="/assets/img/single_pendulum/rotation2-800.webp"></source>
    <source class="responsive-img-srcset" media="(max-width: 1400px)" srcset="/assets/img/single_pendulum/rotation2-1400.webp"></source>
    

    <!-- Fallback to the original file -->
    <img src="/assets/img/single_pendulum/rotation2.jpg" class="img-fluid rounded z-depth-1" width="auto" height="auto" onerror="this.onerror=null; $('.responsive-img-srcset').remove();">

  </picture>

</figure>

    </div>
</div>

<p>Again, we can find the transformation equations between the two frames:</p>

\[\hat{a}_1=cos(\phi)\hat{b}_1+sin(\phi)\hat{b}_3\]

\[\hat{a}_2=\hat{b}_2\]

\[\hat{a}_3=-sin(\phi)\hat{b}_1+cos(\phi)\hat{b}_3\]

<p>Then the transformation matrix from frame \(A\) to frame \(B\) is:</p>

\[{}^AC^B=
\begin{bmatrix}
cos(\phi) &amp; 0 &amp; -sin(\phi) \\
0 &amp; 1 &amp; 0 \\
sin(\phi) &amp; 0 &amp; cos(\phi) \\
\end{bmatrix}\]

<p>A third rotation is unnecessary because the pendulum is not allowed to twist.</p>

<p>To obtain the transformation matrix that transforms a vector from frame \(I\) to frame \(B\), we simply multiply the two matrices above (the order matters!):</p>

\[{}^IC^B={}^AC^B\cdot{}^IC^A=
\begin{bmatrix}
cos(\phi) &amp; -sin(\phi)sin(\theta) &amp; -cos(\theta)sin(\phi) \\
0 &amp; cos(\theta) &amp; -sin(\theta) \\
sin(\phi) &amp; cos(\phi)sin(\theta) &amp; cos(\phi)cos(\theta) \\
\end{bmatrix}\]

<p>The first column of the matrix expresses \(\hat{x}\) in terms of \(\hat{b}_1\), \(\hat{b}_2\), and \(\hat{b}_3\). The second column expresses \(\hat{y}\) in terms of \(\hat{b}_1\), \(\hat{b}_2\), and \(\hat{b}_3\). The third column expresses \(\hat{z}\) in terms of \(\hat{b}_1\), \(\hat{b}_2\), and \(\hat{b}_3\).</p>

<p>Note that these matrices do not rotate a vector in space. Instead, they transform the components of the a vector in one frame to the components in another frame (i.e. change of basis). The vector remains the same vector, but we’re essentially expressing the components in another coordinate system. These matrices will come in handy when we’re switching between reference frames. To transform the components in the reverse direction (for example, from \(B\) to \(A\) instead of from \(A\) to \(B\)), we just invert the transformation matrix.</p>

<p>Like in any dynamics problem, the next step after defining the reference frame and coordinate system is to draw a free-body diagram of the system:</p>

<div class="row justify-content-sm-center">
    <div class="col-sm-8 mt-3 mt-md-0">
        <figure>

  <picture>
    
    <source class="responsive-img-srcset" media="(max-width: 480px)" srcset="/assets/img/single_pendulum/fbd-480.webp"></source>
    <source class="responsive-img-srcset" media="(max-width: 800px)" srcset="/assets/img/single_pendulum/fbd-800.webp"></source>
    <source class="responsive-img-srcset" media="(max-width: 1400px)" srcset="/assets/img/single_pendulum/fbd-1400.webp"></source>
    

    <!-- Fallback to the original file -->
    <img src="/assets/img/single_pendulum/fbd.jpg" class="img-fluid rounded z-depth-1" width="auto" height="auto" onerror="this.onerror=null; $('.responsive-img-srcset').remove();">

  </picture>

</figure>

    </div>
</div>

<p>It is important that we include the reaction moment \(M_3\) which prevents the pendulum from twisting about its longitudinal axis. Also, we will model the pendulum as a thin rod of length \(l\) and mass \(m\). Notice that the axes of the body frame coincide with the pendulum’s axes of symmetry. This was not an arbitrary choice. Choosing the axes of the body frame as the axes of symmetry will greatly simplify the angular momentum balance equations as will be shown later.</p>

<p>The next step is to perform a linear momentum balance in each of the coordinate directions of the body frame. But before we do so, we must derive an expression for the inertial acceleration of the center of mass of the pendulum in terms of the body frame unit vectors. To do this, we differentiate the position vector in frame \(B\), \(\mathbf{r}_G/O=\frac{l}{2}\hat{b}_3\), twice:</p>

\[{}^I\mathbf{a}_{G/O}=\frac{l}{2}[(\ddot{\phi}+\dot{\theta}^2sin(\phi)cos(\phi))\hat{b}_1+(\ddot{\theta}cos(\phi)-2\dot{\theta}\dot{\phi}sin(\phi)\hat{b}_2-(\dot{\phi}^2-\dot{\theta}^2cos^2(\phi))\hat{b}_3]\]

<p>Now we perform linear momentum balance in each of the coordinate directions.</p>

<p>In the \(\hat{b}_1\) direction:</p>

\[\frac{l}{2}(\ddot{\phi}+\dot{\theta}^2sin(\phi)cos(\phi))=\frac{1}{m}(R_1-cos(\theta)sin(\phi)F_g)\]

<p>In the \(\hat{b}_2\) direction:</p>

\[\frac{l}{2}(\ddot{\theta}cos(\phi)-2\dot{\theta}\dot{\phi}sin{\phi})=\frac{1}{m}(R_2-sin(\theta)F_g)\]

<p>In the \(\hat{b}_3\) direction:</p>

\[-\frac{l}{2}(\dot{\phi}^2+\dot{\theta}^2cos^2(\phi))=\frac{1}{m}(-R_3+cos(\phi)cos(\theta)F_g)\]

<p>Next, we perform angular momentum balance. Because we chose the pendulum’s axes of symmetry as the axes of the body frame, the inertia tensor with respect to the body frame is diagonal:</p>

\[I=
\begin{bmatrix}
ml^2/3 &amp; 0 &amp; 0 \\
0 &amp; ml^2/3 &amp;  \\
0 &amp; 0 &amp; 0 \\
\end{bmatrix}\]

<p>When the body frame’s axes coincide with the body’s axes of symmetry, these axes called the principal axes. Also, we have used the fact that, because the rod is thin (\(r&lt;&lt;l\)), the moment of inertia about \(\hat{b}_3\) is negligible.</p>

<p>We also need the angular velocity vector in the body frame. The angular velocity vector is:</p>

\[{}^I\mathbf{\omega}=\dot{\theta}\hat{a}_1+\dot{\phi}\hat{b}_2\]

<p>From here, we just use the transformation matrices we previously derived to express everything in terms of \(\hat{b}_1\), \(\hat{b}_2\), and \(\hat{b}_3\):</p>

\[{}^I\mathbf{\omega}=\dot{\theta}cos(\phi)\hat{b}_1+\dot{\phi}\hat{b}_2+\dot{\theta}sin(\phi)\hat{b}_3\]

<p>Now we can write the equations for the angular momentum balance about the center of mass of the pendulum in the principal-axes body frame. This implies that we must compute the moment exerted by external forces about the center of mass. Like with the linear momentum balance, we consider the angular momentum in each of the body frame coordinate directions separately.</p>

<p>In the \(\hat{b}_1\) direction:</p>

\[\frac{ml^2}{3}(\ddot{\theta}cos(\phi)-\dot{\theta}\dot{\phi}sin(\phi))-\frac{ml^2}{3}\dot{\theta}\dot{\phi}sin(\phi)=\frac{l}{2}F_gsin(\theta)\]

<p>In the \(\hat{b}_2\) direction:</p>

\[\frac{ml^2}{3}\ddot{\phi}+\frac{ml^2}{3}\dot{\theta}^2sin(\phi)cos(\phi)=\frac{-l}{2}F_gcos(\theta)sin(\phi)\]

<p>In the \(\hat{b}_3\) direction:</p>

\[0=M_3\]

<p>It is important to note that, had we used a body frame that was not the principal-axes body frame, the equations for angular momentum balance would have been much more complicated due to the inertia tensor having nonzero off-diagonal terms.</p>

<p>Now we have system of 6 equations (3 from LMB, 3 from AMB) for 6 unknowns (\(R_1\), \(R_2\), \(R_3\), \(M_3\), \(\ddot{\theta}\), \(\ddot{\phi}\)). Unlike the maximal coordinates approach, we do not have a separate constraint equation. The constraint that the rod is rigidly attached to the base was already taken into account when we derived an expression for \({}^I\mathbf{a}_{G/O}\). Had we approached this problem using the maximal coordinates approach, we would have had an additional degree of freedom from a third rotation about \(\hat{b}_3\) by an angle \(\psi\) and added a constraint equation \(\dot{\psi}=0\) to our system of equations. Also, we would not have assumed that the pendulum had a fixed length when deriving an expression for \({}^I\mathbf{a}_{G/O}\) and instead would have added a second constraint equation \(x^2+y^2+z^2=l^2\) to our system of equations.</p>

<p>Next step is to solve for the unknowns. Using MATLAB’s ‘'’solve’’’ command.</p>

<h3 id="lagrange-method">Lagrange Method</h3>

<h3 id="tips-for-animating-the-solution">Tips for Animating the Solution</h3>

          </article>

        </div>

      
    </div>

    <!-- Footer -->    
    <footer class="fixed-bottom">
      <div class="container mt-0">
        © Copyright 2023 Jin Hyun  Park. Powered by <a href="https://jekyllrb.com/" target="_blank" rel="external nofollow noopener">Jekyll</a> with <a href="https://github.com/alshedivat/al-folio" rel="external nofollow noopener" target="_blank">al-folio</a> theme. Hosted by <a href="https://pages.github.com/" target="_blank" rel="external nofollow noopener">GitHub Pages</a>. Photos from <a href="https://unsplash.com" target="_blank" rel="external nofollow noopener">Unsplash</a>.

      </div>
    </footer>

    <!-- JavaScripts -->
    <!-- jQuery -->
  <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>

    <!-- Bootsrap & MDB scripts -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/js/bootstrap.bundle.min.js" integrity="sha256-fgLAgv7fyCGopR/gBNq2iW3ZKIdqIcyshnUULC4vex8=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/js/mdb.min.js" integrity="sha256-NdbiivsvWt7VYCt6hYNT3h/th9vSTL4EDWeGs5SN3DA=" crossorigin="anonymous"></script>

    <!-- Masonry & imagesLoaded -->
  <script defer src="https://cdn.jsdelivr.net/npm/masonry-layout@4.2.2/dist/masonry.pkgd.min.js" integrity="sha256-Nn1q/fx0H7SNLZMQ5Hw5JLaTRZp0yILA/FRexe19VdI=" crossorigin="anonymous"></script>
  <script defer src="https://cdn.jsdelivr.net/npm/imagesloaded@4/imagesloaded.pkgd.min.js"></script>
  <script defer src="/assets/js/masonry.js" type="text/javascript"></script>
    
  <!-- Medium Zoom JS -->
  <script defer src="https://cdn.jsdelivr.net/npm/medium-zoom@1.0.8/dist/medium-zoom.min.js" integrity="sha256-7PhEpEWEW0XXQ0k6kQrPKwuoIomz8R8IYyuU1Qew4P8=" crossorigin="anonymous"></script>
  <script defer src="/assets/js/zoom.js"></script>

  <!-- Bootstrap Table -->
  <script defer src="https://unpkg.com/bootstrap-table@1.21.4/dist/bootstrap-table.min.js"></script>

  <!-- Load Common JS -->
  <script src="/assets/js/no_defer.js"></script>
  <script defer src="/assets/js/common.js"></script>
  <script defer src="/assets/js/copy_code.js" type="text/javascript"></script>

    
  <script async src="https://d1bxh8uas1mnw7.cloudfront.net/assets/embed.js"></script>
  <script async src="https://badge.dimensions.ai/badge.js"></script>

    <!-- MathJax -->
  <script type="text/javascript">
    window.MathJax = {
      tex: {
        tags: 'ams'
      }
    };
  </script>
  <script defer type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3.2.0/es5/tex-mml-chtml.js"></script>
  <script defer src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>

    
    

<!-- Scrolling Progress Bar -->
<script type="text/javascript">
  /*
   * This JavaScript code has been adapted from the article 
   * https://css-tricks.com/reading-position-indicator/ authored by Pankaj Parashar, 
   * published on the website https://css-tricks.com on the 7th of May, 2014.
   * Couple of changes were made to the original code to make it compatible 
   * with the `al-foio` theme.
   */
  const progressBar = $("#progress");
  /*
   * We set up the bar after all elements are done loading.
   * In some cases, if the images in the page are larger than the intended
   * size they'll have on the page, they'll be resized via CSS to accomodate
   * the desired size. This mistake, however, breaks the computations as the
   * scroll size is computed as soon as the elements finish loading.
   * To account for this, a minimal delay was introduced before computing the
   * values.
   */
  window.onload = function () {
    setTimeout(progressBarSetup, 50);
  };
  /*
   * We set up the bar according to the browser.
   * If the browser supports the progress element we use that.
   * Otherwise, we resize the bar thru CSS styling
   */
  function progressBarSetup() {
    if ("max" in document.createElement("progress")) {
      initializeProgressElement();
      $(document).on("scroll", function() {
        progressBar.attr({ value: getCurrentScrollPosition() });
      });
      $(window).on("resize", initializeProgressElement);
    } else {
      resizeProgressBar();
      $(document).on("scroll", resizeProgressBar);
      $(window).on("resize", resizeProgressBar);
    }
  }
  /*
   * The vertical scroll position is the same as the number of pixels that
   * are hidden from view above the scrollable area. Thus, a value > 0 is
   * how much the user has scrolled from the top
   */
  function getCurrentScrollPosition() {
    return $(window).scrollTop();
  }

  function initializeProgressElement() {
    let navbarHeight = $("#navbar").outerHeight(true);
    $("body").css({ "padding-top": navbarHeight });
    $("progress-container").css({ "padding-top": navbarHeight });
    progressBar.css({ top: navbarHeight });
    progressBar.attr({
      max: getDistanceToScroll(),
      value: getCurrentScrollPosition(),
    });
  }
  /*
   * The offset between the html document height and the browser viewport
   * height will be greater than zero if vertical scroll is possible.
   * This is the distance the user can scroll
   */
  function getDistanceToScroll() {
    return $(document).height() - $(window).height();
  }

  function resizeProgressBar() {
    progressBar.css({ width: getWidthPercentage() + "%" });
  }
  // The scroll ratio equals the percentage to resize the bar
  function getWidthPercentage() {
    return (getCurrentScrollPosition() / getDistanceToScroll()) * 100;
  }
</script>

  </body>
</html>
